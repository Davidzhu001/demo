<div id="welcome">
  <table id="devices">
    <tr>
      <% j = 0; @devices.each_with_index do |device, i| j = i %>
        <td class="item">
	  <%= link_to image_tag('trash.gif'), device, :confirm => 'Are you sure?', :method => :delete,
	       :title => 'delete', :class => 'oper' %>
	  <%= link_to image_tag('edit.jpg'), edit_device_url(device), :title => 'edit', :class => 'oper' %>
      <% if device.button -%>
	    <%= link_to image_tag(device.button.public_filename), device, :class => 'dev_link' %>
      <% else -%>
	    <%= link_to device.name, device, :class => 'dev_link' %>
      <% end -%>
	</td>
        <% if (i % 5) == 4 -%>
    </tr><tr>
        <% end -%>
      <% end %>
      <%= '<td class="item"/>' * (5 - j) %>
    </tr>
    <tr><td class="title" colspan="5"><span>Applications</span></td></tr>
    <tr>
      <% j = 0; @applications.each_with_index do |app, i| j = i %>
        <td class="item">
	  <%= link_to image_tag('trash.gif'), app, :confirm => 'Are you sure?', :method => :delete,
	       :title => 'delete', :class => 'oper' %>
	  <%= link_to image_tag('edit.jpg'), edit_device_url(app), :title => 'edit', :class => 'oper' %>
      <% if app.button -%>
	    <%= link_to image_tag(app.button.public_filename), app, :class => 'dev_link' %>
      <% else -%>
	    <%= link_to app.name, app, :class => 'dev_link' %>
      <% end -%>
	</td>
        <% if (i % 5) == 4 -%>
    </tr><tr>
        <% end -%>
      <% end %>
      <%= '<td class="item"/>' * (5 - j) %>
    </tr>
  </table>
  <%= link_to 'New device', new_device_path, {:class => 'new'} %>
</div>
